<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CapitalPath Members</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .box {
      background: #fff;
      padding: 25px;
      width: 100%;
      max-width: 420px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,.1);
      text-align: center;
    }

    input {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      background: #0d6efd;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    .hidden { display: none; }

    .members {
      text-align: center;
    }
  </style>
</head>
<body>

<div class="box" id="authBox">
  <h2>Create Account</h2>

  <input id="firstName" placeholder="First name" />
  <input id="lastName" placeholder="Last name" />
  <input id="phone" placeholder="Phone number" />
  <input id="address" placeholder="Address" />
  <input id="state" placeholder="State" />
  <input id="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password (min 6)" />

  <button onclick="createAccount()">Create Account</button>
  <button onclick="login()">Login</button>

  <p id="message"></p>
</div>

<div class="box hidden members" id="membersBox">
  <h2>Welcome to CapitalPath</h2>
  <p>You now have full access.</p>

  <a href="https://amzn.to/4bqePay" target="_blank">ðŸ“˜ Product #1</a><br><br>
  <a href="https://amzn.to/46sS6XV" target="_blank">ðŸ“˜ Product #2</a><br><br>
  <a href="https://amzn.to/46qDF6E" target="_blank">ðŸ”Œ Product #3</a><br><br>

  <button onclick="logout()">Logout</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC7T03RddiF1PmtjPK3AEBT6GXsGbRhyNw",
    authDomain: "capitalpath-cf220.firebaseapp.com",
    projectId: "capitalpath-cf220",
    storageBucket: "capitalpath-cf220.firebasestorage.app",
    messagingSenderId: "950285442316",
    appId: "1:950285442316:web:9067c4017ed25370683d29"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.createAccount = () => {
    const fields = ["firstName","lastName","phone","address","state","email","password"];
    for (let id of fields) {
      if (!document.getElementById(id).value) {
        message.innerText = "Please fill all fields.";
        return;
      }
    }

    createUserWithEmailAndPassword(auth, email.value, password.value)
      .then(() => message.innerText = "Account created successfully!")
      .catch(e => message.innerText = e.message);
  };

  window.login = () => {
    signInWithEmailAndPassword(auth, email.value, password.value)
      .catch(e => message.innerText = e.message);
  };

  window.logout = () => signOut(auth);

  onAuthStateChanged(auth, user => {
    authBox.classList.toggle("hidden", !!user);
    membersBox.classList.toggle("hidden", !user);
  });
</script>

</body>
</html>
